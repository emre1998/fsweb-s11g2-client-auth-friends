{"ast":null,"code":"import _slicedToArray from\"C:/Users/EMRE CAN/fsweb-s11g2-client-auth-friends/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext}from\"react\";import axios from\"axios\";import useLocalStorage from\"../hooks/useLocalStorage\";import{useHistory}from\"react-router-dom\";// import useLocalStorage from \"../hooks/useLocalStorage\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useLocalStorage=useLocalStorage(\"0323Auth\",{}),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),authInfo=_useLocalStorage2[0],setAuthInfo=_useLocalStorage2[1];//   const [authInfo, setAuthInfo] = useState({});\nvar history=useHistory();var isLoggedIn=authInfo&&authInfo.token;var initAuth=function initAuth(authFormData){axios.post(\"http://localhost:9000/api/login\",authFormData).then(function(response){//  console.log(response);\nresponse.data&&setAuthInfo(response.data);}).catch(function(error){console.log(\"authError\",error);});};var logOut=function logOut(){//TODO\nconsole.log(\"logout\");setAuthInfo({});history.push(\"/login\");};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{initAuth:initAuth,logOut:logOut,isLoggedIn:isLoggedIn,authInfo:authInfo},children:children});};export var AuthContext=/*#__PURE__*/createContext();export default AuthContextProvider;","map":{"version":3,"names":["createContext","axios","useLocalStorage","useHistory","jsx","_jsx","AuthContextProvider","_ref","children","_useLocalStorage","_useLocalStorage2","_slicedToArray","authInfo","setAuthInfo","history","isLoggedIn","token","initAuth","authFormData","post","then","response","data","catch","error","console","log","logOut","push","AuthContext","Provider","value"],"sources":["C:/Users/EMRE CAN/fsweb-s11g2-client-auth-friends/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext } from \"react\";\nimport axios from \"axios\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport { useHistory } from \"react-router-dom\";\n// import useLocalStorage from \"../hooks/useLocalStorage\";\n\nconst AuthContextProvider = ({ children }) => {\n  const [authInfo, setAuthInfo] = useLocalStorage(\"0323Auth\", {});\n  //   const [authInfo, setAuthInfo] = useState({});\n  const history = useHistory();\n  let isLoggedIn = authInfo && authInfo.token;\n\n  const initAuth = (authFormData) => {\n    axios\n      .post(\"http://localhost:9000/api/login\", authFormData)\n      .then(function (response) {\n        //  console.log(response);\n        response.data && setAuthInfo(response.data);\n      })\n      .catch(function (error) {\n        console.log(\"authError\", error);\n      });\n  };\n\n  const logOut = () => {\n    //TODO\n    console.log(\"logout\");\n    setAuthInfo({});\n    history.push(\"/login\");\n  };\n\n  return (\n    <AuthContext.Provider value={{ initAuth, logOut, isLoggedIn, authInfo }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const AuthContext = createContext();\nexport default AuthContextProvider;\n"],"mappings":"uIAAA,OAASA,aAAa,KAAQ,OAAO,CACrC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,eAAe,KAAM,0BAA0B,CACtD,OAASC,UAAU,KAAQ,kBAAkB,CAC7C;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAEA,GAAM,CAAAC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrC,IAAAC,gBAAA,CAAgCP,eAAe,CAAC,UAAU,CAAE,CAAC,CAAC,CAAC,CAAAQ,iBAAA,CAAAC,cAAA,CAAAF,gBAAA,IAAxDG,QAAQ,CAAAF,iBAAA,IAAEG,WAAW,CAAAH,iBAAA,IAC5B;AACA,GAAM,CAAAI,OAAO,CAAGX,UAAU,CAAC,CAAC,CAC5B,GAAI,CAAAY,UAAU,CAAGH,QAAQ,EAAIA,QAAQ,CAACI,KAAK,CAE3C,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,YAAY,CAAK,CACjCjB,KAAK,CACFkB,IAAI,CAAC,iCAAiC,CAAED,YAAY,CAAC,CACrDE,IAAI,CAAC,SAAUC,QAAQ,CAAE,CACxB;AACAA,QAAQ,CAACC,IAAI,EAAIT,WAAW,CAACQ,QAAQ,CAACC,IAAI,CAAC,CAC7C,CAAC,CAAC,CACDC,KAAK,CAAC,SAAUC,KAAK,CAAE,CACtBC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEF,KAAK,CAAC,CACjC,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAAG,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB;AACAF,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrBb,WAAW,CAAC,CAAC,CAAC,CAAC,CACfC,OAAO,CAACc,IAAI,CAAC,QAAQ,CAAC,CACxB,CAAC,CAED,mBACEvB,IAAA,CAACwB,WAAW,CAACC,QAAQ,EAACC,KAAK,CAAE,CAAEd,QAAQ,CAARA,QAAQ,CAAEU,MAAM,CAANA,MAAM,CAAEZ,UAAU,CAAVA,UAAU,CAAEH,QAAQ,CAARA,QAAS,CAAE,CAAAJ,QAAA,CACrEA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,IAAM,CAAAqB,WAAW,cAAG7B,aAAa,CAAC,CAAC,CAC1C,cAAe,CAAAM,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}